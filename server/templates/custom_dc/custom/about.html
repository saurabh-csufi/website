{#
 Copyright 2023 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
#}

{%- extends BASE_HTML -%}

{% set main_id = 'standard-insights' %}
{% set page_id = 'page-standard-insights' %}
{% set title = 'India Economic Data Insights' %}

{% block head %}
{{ super() }}
<script src="https://datacommons.org/datacommons.js"></script>
<style>
  :root {
    /* Google Brand Colors */
    --google-blue: #4285F4;
    --google-red: #EA4335;
    --google-yellow: #FBBC04;
    --google-green: #34A853;
    --google-grey: #3C4043;
    --google-grey-500: #9AA0A6;

    /* Primary UI Colors (using Google palette) */
    --saffron: #FBBC04;
    --white: #FFFFFF;
    --green: #34A853;
    --navy: #174ea6;
    --chakra-blue: #4285F4;
  }

  .insights-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem 1rem;
  }

  .insights-header {
    text-align: center;
    margin-bottom: 2rem;
    padding: 2rem;
    background: linear-gradient(135deg, #174EA6 0%, #4285F4 100%);
    border-radius: 16px;
    color: white;
  }

  .insights-header h1 {
    font-size: 2.2rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  .insights-header p {
    font-size: 1.1rem;
    opacity: 0.95;
  }

  .insights-header .badge {
    display: inline-block;
    background: rgba(255,255,255,0.2);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    margin-top: 0.5rem;
  }

  /* Highlight Section - Key Stats */
  .highlight-section {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .highlight-card {
    background: #fff;
    border-radius: 8px;
    padding: 1rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-top: 3px solid var(--navy);
  }

  .highlight-card.saffron {
    border-top-color: var(--saffron);
  }

  .highlight-card.green {
    border-top-color: var(--green);
  }

  /* Charts Grid */
  .insights-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .insight-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    padding: 1.5rem;
    min-height: 420px;
    border-top: 4px solid var(--navy);
  }

  .insight-card.saffron-border {
    border-top-color: var(--saffron);
  }

  .insight-card.green-border {
    border-top-color: var(--green);
  }

  .insight-card h3 {
    font-size: 1rem;
    color: var(--navy);
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid #e9ecef;
    font-weight: 600;
  }

  .full-width-card {
    grid-column: 1 / -1;
  }

  /* Section Headers */
  .section-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 2rem 0 1rem 0;
    padding-bottom: 0.75rem;
    border-bottom: 3px solid var(--navy);
  }

  .section-header h2 {
    font-size: 1.3rem;
    color: var(--navy);
    margin: 0;
    font-weight: 600;
  }

  .section-header .icon {
    width: 36px;
    height: 36px;
    background: #174ea6;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
  }

  /* Small Cards Grid for Gauge/Pie */
  .small-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
  }

  .small-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    padding: 1.25rem;
    min-height: 320px;
  }

  .small-card h3 {
    font-size: 0.95rem;
    color: var(--navy);
    margin-bottom: 0.75rem;
    font-weight: 600;
  }

  /* Custom Gauge Styles - Clean Design */
  .custom-gauge-container {
    position: relative;
    width: 100%;
    height: 200px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 20px;
  }

  .gauge-canvas-wrapper {
    position: relative;
    width: 180px;
    height: 100px;
  }

  .gauge-canvas {
    display: block;
  }

  .gauge-value {
    text-align: center;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--google-grey);
    margin-top: 4px;
    line-height: 1;
  }

  .gauge-value.positive {
    color: #34A853;  /* Google Green */
  }

  .gauge-value.negative {
    color: #EA4335;  /* Google Red */
  }

  .gauge-value.positive.small {
    color: #4285F4;  /* Google Blue for small positive */
  }

  .gauge-value.negative.small {
    color: #F9AB00;  /* Orange for small negative */
  }

  .gauge-label {
    font-size: 0.8rem;
    color: var(--google-grey-500);
    margin-top: 6px;
    text-align: center;
  }

  .gauge-range {
    display: flex;
    justify-content: space-between;
    width: 180px;
    font-size: 0.65rem;
    color: var(--google-grey-500);
    margin-top: 2px;
  }

  .gauge-source {
    font-size: 0.75rem;
    color: var(--google-grey-500);
    margin-top: 10px;
  }

  .gauge-source a {
    color: var(--navy);
    text-decoration: none;
  }

  .gauge-source a:hover {
    text-decoration: underline;
  }

  /* Footer */
  .insights-footer {
    text-align: center;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 12px;
    margin-top: 2rem;
  }

  .insights-footer p {
    margin: 0 0 0.5rem 0;
    color: #666;
    font-size: 0.9rem;
  }

  .insights-footer a {
    color: var(--navy);
    text-decoration: none;
  }

  .insights-footer a:hover {
    text-decoration: underline;
  }

  /* Style datacommons-highlight for dark text */
  .highlight-card datacommons-highlight {
    --dc-highlight-header-color: var(--navy);
    --dc-highlight-value-color: var(--navy);
    --dc-highlight-text-color: #333;
  }

  /* Tab Navigation Styles */
  .tabs-container {
    margin-bottom: 2rem;
  }

  .tabs-nav {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    border-bottom: 3px solid #e9ecef;
    margin-bottom: 2rem;
    padding-bottom: 0;
  }

  .tab-button {
    background: transparent;
    border: none;
    padding: 0.75rem 1.5rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: #666;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    margin-bottom: -3px;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .tab-button:hover {
    color: var(--navy);
    background: rgba(23, 78, 166, 0.05);
  }

  .tab-button.active {
    color: var(--navy);
    border-bottom-color: var(--navy);
    font-weight: 600;
  }

  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: block;
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive */
  @media (max-width: 1200px) {
    .highlight-section {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (max-width: 1024px) {
    .small-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 768px) {
    .highlight-section {
      grid-template-columns: repeat(2, 1fr);
    }
    .insights-grid {
      grid-template-columns: 1fr;
    }
    .insight-card {
      min-height: 350px;
    }
    .insights-header h1 {
      font-size: 1.6rem;
    }
    .small-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 480px) {
    .highlight-section {
      grid-template-columns: 1fr;
    }
  }
</style>
{% endblock %}

{% block content %}
<div class="insights-container">
  <!-- Header -->
  <div class="insights-header">
    <h1>India Economic Data Insights</h1>
    <p>Comprehensive Economic Indicators from MOSPI and Government Sources</p>
    <span class="badge">Data: 2011-2025 | Source: Ministry of Statistics and Programme Implementation</span>
  </div>

  <!-- Tab Navigation -->
  <div class="tabs-container">
    <div class="tabs-nav">
      <button class="tab-button active" data-tab="cpi-inflation">CPI & Inflation</button>
      <button class="tab-button" data-tab="gdp-gsdp">GDP & State GSDP</button>
      <button class="tab-button" data-tab="exports">Export Data</button>
      <button class="tab-button" data-tab="industrial">Industrial Stats</button>
    </div>

  <!-- Tab Content: CPI & Inflation -->
  <div id="tab-cpi-inflation" class="tab-content active">
  <!-- Key Highlights Section -->
  <div class="section-header">
    <div class="icon">üìä</div>
    <h2>Key CPI Categories (Base: 2012=100)</h2>
  </div>

  <div class="highlight-section">
    <div class="highlight-card">
      <datacommons-highlight
        apiRoot="/"
        header="Food & Beverages CPI"
        place="country/IND"
        variable="ConsumerPriceIndex_EconomicActivity_FoodAndBeverages"
      ></datacommons-highlight>
    </div>
    <div class="highlight-card saffron">
      <datacommons-highlight
        apiRoot="/"
        header="Health CPI"
        place="country/IND"
        variable="ConsumerPriceIndex_EconomicActivity_Health"
      ></datacommons-highlight>
    </div>
    <div class="highlight-card green">
      <datacommons-highlight
        apiRoot="/"
        header="Education CPI"
        place="country/IND"
        variable="ConsumerPriceIndex_EconomicActivity_Education"
      ></datacommons-highlight>
    </div>
    <div class="highlight-card saffron">
      <datacommons-highlight
        apiRoot="/"
        header="Housing CPI (Urban)"
        place="country/IND"
        variable="ConsumerPriceIndex_EconomicActivity_Housing_Urban"
      ></datacommons-highlight>
    </div>
    <div class="highlight-card green">
      <datacommons-highlight
        apiRoot="/"
        header="Fuel & Light CPI"
        place="country/IND"
        variable="ConsumerPriceIndex_EconomicActivity_FuelAndLight"
      ></datacommons-highlight>
    </div>
  </div>

  <!-- Time Series Trends -->
  <div class="section-header">
    <div class="icon">üìà</div>
    <h2>CPI Trends Over Time</h2>
  </div>

  <div class="insights-grid">
    <!-- Line Chart: CPI Trends - Full Width -->
    <div class="insight-card full-width-card">
      <h3>Consumer Price Index Trends (2011-2025)</h3>
      <datacommons-line
        apiRoot="/"
        header="CPI by Category Over Time (Base: 2012=100)"
        places="country/IND"
        variables="ConsumerPriceIndex_EconomicActivity_FoodAndBeverages ConsumerPriceIndex_EconomicActivity_Health ConsumerPriceIndex_EconomicActivity_Education ConsumerPriceIndex_EconomicActivity_FuelAndLight ConsumerPriceIndex_EconomicActivity_ClothingAndFootwear"
      ></datacommons-line>
    </div>
  </div>

  <!-- Inflation Section -->
  <div class="section-header">
    <div class="icon">üìâ</div>
    <h2>Top 5 Inflation Movers (by Absolute Change)</h2>
  </div>

  <!-- Top 5 Inflation - Ranked Bar Chart -->
  <div class="insights-grid" style="margin-bottom: 1.5rem;">
    <div class="insight-card full-width-card">
      <h3>Top 5 Categories by Inflation Impact (YoY %)</h3>
      <div id="inflation-bar-chart" style="height: 300px; padding: 1rem;"></div>
    </div>
  </div>

  <div class="small-grid">
    <!-- Gauge: Personal Care & Effects - #1 by absolute value -->
    <div class="small-card">
      <h3>1. Personal Care & Effects</h3>
      <div class="custom-gauge-container" id="gauge-personal-care" data-value="24.04" data-label="Personal Care">
        <div class="gauge-canvas-wrapper">
          <canvas class="gauge-canvas" width="180" height="100"></canvas>
        </div>
        <div class="gauge-value">--</div>
        <div class="gauge-label">YoY Inflation (%)</div>
        <div class="gauge-range"><span>-30%</span><span>0%</span><span>+30%</span></div>
        <div class="gauge-source">Source: <a href="https://mospi.gov.in" target="_blank">MOSPI</a></div>
      </div>
    </div>

    <!-- Gauge: Vegetables - #2 by absolute value -->
    <div class="small-card">
      <h3>2. Vegetables</h3>
      <div class="custom-gauge-container" id="gauge-vegetables" data-value="-22.2" data-label="Vegetables">
        <div class="gauge-canvas-wrapper">
          <canvas class="gauge-canvas" width="180" height="100"></canvas>
        </div>
        <div class="gauge-value">--</div>
        <div class="gauge-label">YoY Inflation (%)</div>
        <div class="gauge-range"><span>-30%</span><span>0%</span><span>+30%</span></div>
        <div class="gauge-source">Source: <a href="https://mospi.gov.in" target="_blank">MOSPI</a></div>
      </div>
    </div>

    <!-- Gauge: Pulses & Products - #3 by absolute value -->
    <div class="small-card">
      <h3>3. Pulses & Products</h3>
      <div class="custom-gauge-container" id="gauge-pulses" data-value="-15.86" data-label="Pulses">
        <div class="gauge-canvas-wrapper">
          <canvas class="gauge-canvas" width="180" height="100"></canvas>
        </div>
        <div class="gauge-value">--</div>
        <div class="gauge-label">YoY Inflation (%)</div>
        <div class="gauge-range"><span>-30%</span><span>0%</span><span>+30%</span></div>
        <div class="gauge-source">Source: <a href="https://mospi.gov.in" target="_blank">MOSPI</a></div>
      </div>
    </div>

    <!-- Gauge: Oils & Fats - #4 by absolute value -->
    <div class="small-card">
      <h3>4. Oils & Fats</h3>
      <div class="custom-gauge-container" id="gauge-oils" data-value="7.87" data-label="Oils & Fats">
        <div class="gauge-canvas-wrapper">
          <canvas class="gauge-canvas" width="180" height="100"></canvas>
        </div>
        <div class="gauge-value">--</div>
        <div class="gauge-label">YoY Inflation (%)</div>
        <div class="gauge-range"><span>-30%</span><span>0%</span><span>+30%</span></div>
        <div class="gauge-source">Source: <a href="https://mospi.gov.in" target="_blank">MOSPI</a></div>
      </div>
    </div>

    <!-- Gauge: Fruits - #5 by absolute value -->
    <div class="small-card">
      <h3>5. Fruits</h3>
      <div class="custom-gauge-container" id="gauge-fruits" data-value="6.87" data-label="Fruits">
        <div class="gauge-canvas-wrapper">
          <canvas class="gauge-canvas" width="180" height="100"></canvas>
        </div>
        <div class="gauge-value">--</div>
        <div class="gauge-label">YoY Inflation (%)</div>
        <div class="gauge-range"><span>-30%</span><span>0%</span><span>+30%</span></div>
        <div class="gauge-source">Source: <a href="https://mospi.gov.in" target="_blank">MOSPI</a></div>
      </div>
    </div>
  </div>

  <!-- Rural vs Urban Comparison Section -->
  <div class="section-header">
    <div class="icon">üèôÔ∏è</div>
    <h2>Rural vs Urban Inflation Comparison</h2>
  </div>

  <div class="insights-grid">
    <!-- Line Chart: Rural vs Urban Food Inflation -->
    <div class="insight-card">
      <h3>Food Inflation: Rural vs Urban</h3>
      <datacommons-line
        apiRoot="/"
        header="Consumer Food Inflation Comparison"
        places="country/IND"
        variables="Inflation_EconomicActivity_ConsumerPriceIndex_ConsumerFood_Rural Inflation_EconomicActivity_ConsumerPriceIndex_ConsumerFood_Urban"
      ></datacommons-line>
    </div>

    <!-- Line Chart: Rural vs Urban Health Inflation -->
    <div class="insight-card saffron-border">
      <h3>Health Inflation: Rural vs Urban</h3>
      <datacommons-line
        apiRoot="/"
        header="Health Inflation Comparison"
        places="country/IND"
        variables="Inflation_EconomicActivity_ConsumerPriceIndex_Health_Rural Inflation_EconomicActivity_ConsumerPriceIndex_Health_Urban"
      ></datacommons-line>
    </div>

    <!-- Line Chart: Rural vs Urban General CPI -->
    <div class="insight-card full-width-card green-border">
      <h3>General CPI: Rural vs Urban vs Combined</h3>
      <datacommons-line
        apiRoot="/"
        header="General Consumer Price Index Comparison (Base: 2012=100)"
        places="country/IND"
        variables="ConsumerPriceIndex_EconomicActivity_MOSPIGeneral ConsumerPriceIndex_EconomicActivity_MOSPIGeneral_Rural ConsumerPriceIndex_EconomicActivity_MOSPIGeneral_Urban"
      ></datacommons-line>
    </div>
  </div>

  <!-- State-wise CPI Map Section -->
  <div class="section-header">
    <div class="icon">üó∫Ô∏è</div>
    <h2>State-wise Consumer Price Index</h2>
  </div>

  <div class="insights-grid">
    <!-- Map: Food CPI by State -->
    <div class="insight-card">
      <h3>Food & Beverages CPI by State</h3>
      <datacommons-map
        apiRoot="/"
        header="Consumer Price Index - Food & Beverages (Base: 2012=100)"
        parentPlace="country/IND"
        childPlaceType="AdministrativeArea1"
        variable="ConsumerPriceIndex_EconomicActivity_FoodAndBeverages"
      ></datacommons-map>
    </div>

    <!-- Map: Health CPI by State -->
    <div class="insight-card saffron-border">
      <h3>Health CPI by State</h3>
      <datacommons-map
        apiRoot="/"
        header="Consumer Price Index - Health (Base: 2012=100)"
        parentPlace="country/IND"
        childPlaceType="AdministrativeArea1"
        variable="ConsumerPriceIndex_EconomicActivity_Health"
      ></datacommons-map>
    </div>

    <!-- Map: General CPI by State - Full Width -->
    <div class="insight-card full-width-card green-border">
      <h3>General CPI by State</h3>
      <datacommons-map
        apiRoot="/"
        header="Consumer Price Index - General (Base: 2012=100)"
        parentPlace="country/IND"
        childPlaceType="AdministrativeArea1"
        variable="ConsumerPriceIndex_EconomicActivity_MOSPIGeneral"
      ></datacommons-map>
    </div>
  </div>
  </div>

  <!-- Tab Content: GDP & State GSDP -->
  <div id="tab-gdp-gsdp" class="tab-content">
    <!-- Key GDP Indicators -->
    <div class="section-header">
      <div class="icon">üìä</div>
      <h2>Key GDP Indicators</h2>
    </div>

    <div class="highlight-section">
      <div class="highlight-card">
        <datacommons-highlight
          apiRoot="/"
          header="GDP (Nominal/Current Prices)"
          place="country/IND"
          variable="Amount_EconomicActivity_GrossDomesticProduction_Nominal"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card saffron">
        <datacommons-highlight
          apiRoot="/"
          header="GDP (Real/Constant Prices)"
          place="country/IND"
          variable="Amount_EconomicActivity_GrossDomesticProduction_RealValue"
          unit="INR"
        ></datacommons-highlight>
      </div>
    </div>
    
    <p style="color: #666; font-size: 0.9rem; margin: 1rem 0; font-style: italic;">
      Note: Nominal GDP reflects current market prices, while Real GDP is adjusted for inflation using constant base year prices. Values shown are for the latest available year from each data source. When MOSPI data is updated with newer years, both indicators will automatically display the latest available year.
    </p>

    <!-- GDP Trends Over Time -->
    <div class="section-header">
      <div class="icon">üìà</div>
      <h2>GDP Trends Over Time</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>GDP Trends: Nominal vs Real (2012-2022)</h3>
        <datacommons-line
          apiRoot="/"
          header="Gross Domestic Product Comparison (INR)"
          places="country/IND"
          variables="Amount_EconomicActivity_GrossDomesticProduction_Nominal Amount_EconomicActivity_GrossDomesticProduction_RealValue"
        ></datacommons-line>
      </div>
    </div>

    <!-- State GSDP Section -->
    <!-- Top States Ranking Section -->
    <div class="section-header">
      <div class="icon">üìä</div>
      <h2>Top States by GSDP (Current Prices)</h2>
    </div>

    <div class="insights-grid" style="margin-bottom: 1.5rem;">
      <div class="insight-card full-width-card">
        <h3>Top 10 States by GSDP Ranking</h3>
        <datacommons-ranking
          apiRoot="/"
          header="State-wise GSDP Ranking (Current Prices)"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="Amount_EconomicActivity_GrossDomesticProduction_Nominal"
          rankingCount="10"
          showHighest
        ></datacommons-ranking>
      </div>
    </div>

    <!-- GSDP Trends Over Time -->
    <div class="section-header">
      <div class="icon">üìà</div>
      <h2>GSDP Trends Over Time</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>Top States by GSDP (Latest Year)</h3>
        <datacommons-bar
          apiRoot="/"
          header="Top States by GSDP (Current Prices, INR)"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variables="Amount_EconomicActivity_GrossDomesticProduction_Nominal"
          sort="descending"
        ></datacommons-bar>
      </div>
    </div>

    <!-- State-wise GSDP Map Section -->
    <div class="section-header">
      <div class="icon">üó∫Ô∏è</div>
      <h2>State-wise Gross State Domestic Product</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card">
        <h3>GSDP by State (Current Prices)</h3>
        <datacommons-map
          apiRoot="/"
          header="Gross State Domestic Product - Current Prices (INR)"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="Amount_EconomicActivity_GrossDomesticProduction_Nominal"
        ></datacommons-map>
      </div>
      <div class="insight-card saffron-border">
        <h3>GSDP by State (Constant Prices)</h3>
        <datacommons-map
          apiRoot="/"
          header="Gross State Domestic Product - Constant Prices (INR)"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="Amount_EconomicActivity_GrossDomesticProduction_RealValue"
        ></datacommons-map>
      </div>
      <div class="insight-card full-width-card green-border">
        <h3>GSDP Growth Rate by State</h3>
        <datacommons-map
          apiRoot="/"
          header="GSDP Growth Rate (%)"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="NominalValue_GrowthRate_Amount_EconomicActivity_GrossDomesticProduction"
        ></datacommons-map>
      </div>
    </div>
  </div>

  <!-- Tab Content: Export Data -->
  <div id="tab-exports" class="tab-content">
    <!-- Top Export Destinations -->
    <div class="section-header">
      <div class="icon">üìä</div>
      <h2>Top Export Destinations</h2>
    </div>

    <div class="insights-grid" style="margin-bottom: 1.5rem;">
      <div class="insight-card full-width-card">
        <h3>Top 15 Export Destinations</h3>
        <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
          Top countries receiving exports from India, ranked by export value in Indian Rupees. Note: "India" appearing in the list likely represents total exports or a data classification issue, as a country cannot export to itself.
        </p>
        <datacommons-ranking
          apiRoot="/"
          header="Top Export Destinations from India (INR)"
          parentPlace="Earth"
          childPlaceType="Country"
          variable="Exports_EconomicActivity_ExportSourceIndia"
          rankingCount="15"
          showHighest
        ></datacommons-ranking>
      </div>
    </div>

    <!-- Export Trends -->
    <div class="section-header">
      <div class="icon">üìà</div>
      <h2>Export Trends</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>Top Export Destinations (Latest Year)</h3>
        <p style="color: #666; font-size: 0.9rem; margin-bottom: 1rem;">
          Major export destinations from India by value. Note: "India" appearing here likely represents total exports or a data classification issue, not actual exports to India.
        </p>
        <datacommons-bar
          apiRoot="/"
          header="Top Countries by Export Value (INR)"
          parentPlace="Earth"
          childPlaceType="Country"
          variables="Exports_EconomicActivity_ExportSourceIndia"
          sort="descending"
          maxPlaces="15"
        ></datacommons-bar>
      </div>
    </div>

    <!-- Export Destinations Map -->
    <div class="section-header">
      <div class="icon">üó∫Ô∏è</div>
      <h2>Export Destinations by Country</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>Export Value by Destination Country</h3>
        <datacommons-map
          apiRoot="/"
          header="Exports from India by Destination Country (INR)"
          parentPlace="Earth"
          childPlaceType="Country"
          variable="Exports_EconomicActivity_ExportSourceIndia"
        ></datacommons-map>
      </div>
    </div>

    <!-- Commodity Exports Section -->
    <div class="section-header">
      <div class="icon">üì¶</div>
      <h2>Top Exported Commodities</h2>
    </div>

    <p style="color: #666; font-size: 0.9rem; margin-bottom: 1.5rem;">
      Major commodities exported from India, ranked by export value in Indian Rupees.
    </p>

    <div class="insights-grid" style="margin-bottom: 1.5rem;">
      <div class="insight-card full-width-card">
        <h3>Commodity Export Trends Over Time</h3>
        <datacommons-line
          apiRoot="/"
          header="Major Commodity Exports (INR)"
          places="country/IND"
          variables="Exports_EconomicActivity_Cereals Exports_EconomicActivity_CoffeeTeaMateAndSpices Exports_EconomicActivity_FishAndCrustaceansMolluscsAndOtherAquatic Exports_EconomicActivity_SugarsAndSugarConfectionery"
        ></datacommons-line>
      </div>
    </div>

    <!-- Key Commodity Highlights -->
    <div class="section-header">
      <div class="icon">üíé</div>
      <h2>Key Commodity Highlights</h2>
    </div>

    <div class="highlight-section">
      <div class="highlight-card">
        <datacommons-highlight
          apiRoot="/"
          header="Cereals Exports"
          place="country/IND"
          variable="Exports_EconomicActivity_Cereals"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card saffron">
        <datacommons-highlight
          apiRoot="/"
          header="Coffee, Tea & Spices"
          place="country/IND"
          variable="Exports_EconomicActivity_CoffeeTeaMateAndSpices"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card green">
        <datacommons-highlight
          apiRoot="/"
          header="Fish & Seafood"
          place="country/IND"
          variable="Exports_EconomicActivity_FishAndCrustaceansMolluscsAndOtherAquatic"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card">
        <datacommons-highlight
          apiRoot="/"
          header="Sugar & Confectionery"
          place="country/IND"
          variable="Exports_EconomicActivity_SugarsAndSugarConfectionery"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card saffron">
        <datacommons-highlight
          apiRoot="/"
          header="Fats & Oils"
          place="country/IND"
          variable="Exports_EconomicActivity_AnimalVegetableOrMicrobialFatsAndOilsAndTheir15"
          unit="INR"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card green">
        <datacommons-highlight
          apiRoot="/"
          header="Fruits & Nuts"
          place="country/IND"
          variable="Exports_EconomicActivity_FruitAndNutsEdiblePeelOfCitrusFruitOrMelons"
          unit="INR"
        ></datacommons-highlight>
      </div>
    </div>
  </div>

  <!-- Tab Content: Industrial Stats -->
  <div id="tab-industrial" class="tab-content">
    <!-- Key Industrial Indicators -->
    <div class="section-header">
      <div class="icon">üìä</div>
      <h2>Key Industrial Indicators</h2>
    </div>

    <div class="highlight-section">
      <div class="highlight-card">
        <datacommons-highlight
          apiRoot="/"
          header="Total Factories"
          place="country/IND"
          variable="Count_Establishment_Factory"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card saffron">
        <datacommons-highlight
          apiRoot="/"
          header="Gross Value Added"
          place="country/IND"
          variable="Amount_EconomicActivity_Factory_GrossValueAdded"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card green">
        <datacommons-highlight
          apiRoot="/"
          header="Total Workers"
          place="country/IND"
          variable="Count_Worker_Factory"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card">
        <datacommons-highlight
          apiRoot="/"
          header="Fixed Capital"
          place="country/IND"
          variable="Amount_EconomicActivity_Factory_FixedCapital"
        ></datacommons-highlight>
      </div>
      <div class="highlight-card saffron">
        <datacommons-highlight
          apiRoot="/"
          header="Total Emoluments"
          place="country/IND"
          variable="Amount_EconomicActivity_Factory_Emolument"
        ></datacommons-highlight>
      </div>
    </div>

    <!-- Top States by Factory Count -->
    <div class="section-header">
      <div class="icon">üìà</div>
      <h2>Top States by Factory Count</h2>
    </div>

    <div class="insights-grid" style="margin-bottom: 1.5rem;">
      <div class="insight-card full-width-card">
        <h3>Top 10 States by Number of Factories</h3>
        <datacommons-ranking
          apiRoot="/"
          header="States Ranked by Factory Count"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="Count_Establishment_Factory"
          rankingCount="10"
          showHighest
        ></datacommons-ranking>
      </div>
    </div>

    <!-- Industrial Trends -->
    <div class="section-header">
      <div class="icon">üìâ</div>
      <h2>Industrial Trends</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>Top States by Factory Count (Latest Year)</h3>
        <datacommons-bar
          apiRoot="/"
          header="Top States by Number of Factories"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variables="Count_Establishment_Factory"
          sort="descending"
          maxPlaces="10"
        ></datacommons-bar>
      </div>
    </div>

    <!-- State-wise Industrial Maps -->
    <div class="section-header">
      <div class="icon">üó∫Ô∏è</div>
      <h2>State-wise Industrial Statistics</h2>
    </div>

    <div class="insights-grid">
      <div class="insight-card full-width-card">
        <h3>Factory Count by State</h3>
        <datacommons-map
          apiRoot="/"
          header="Number of Factories by State"
          parentPlace="country/IND"
          childPlaceType="AdministrativeArea1"
          variable="Count_Establishment_Factory"
        ></datacommons-map>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="insights-footer">
    <p>
      Data Source: <a href="https://mospi.gov.in/" target="_blank">Ministry of Statistics and Programme Implementation (MOSPI)</a> - Government of India
    </p>
    <p>
      <a href="/explore">Search Data</a> |
      <a href="/tools/statvar">Browse Variables</a> |
      <a href="/tools/download">Download Data</a>
    </p>
    <p style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #dee2e6;">
      Powered by <a href="https://datacommons.org" target="_blank"><span style="color:#4285F4">G</span><span style="color:#EA4335">o</span><span style="color:#FBBC05">o</span><span style="color:#4285F4">g</span><span style="color:#34A853">l</span><span style="color:#EA4335">e</span></a> <a href="https://datacommons.org" target="_blank">Data Commons</a>
    </p>
  </div>
</div>

<script>
// Custom Gauge Chart Rendering for Inflation Rates
// Displays inflation values with proper proportional fill
// Warm colors (red/orange) for high inflation, cool colors (blue) for low/negative

function drawGauge(container) {
  const canvas = container.querySelector('.gauge-canvas');
  const valueEl = container.querySelector('.gauge-value');
  const value = parseFloat(container.dataset.value) || 0;

  if (!canvas) return;

  const ctx = canvas.getContext('2d');
  const width = canvas.width;   // 180
  const height = canvas.height; // 100

  // Center at bottom of canvas, arc curves upward
  const centerX = width / 2;    // 90
  const centerY = height;       // 100
  const radius = 75;
  const lineWidth = 14;

  // Clear canvas
  ctx.clearRect(0, 0, width, height);

  // === ANGLE REFERENCE ===
  // Canvas angles: 0=RIGHT, œÄ/2=DOWN, œÄ=LEFT, -œÄ/2=UP
  // Our semicircle: LEFT(œÄ) --through TOP(-œÄ/2)-- to RIGHT(0)
  const LEFT = Math.PI;         // œÄ = 3.14159 (left edge)
  const TOP = -Math.PI / 2;     // -œÄ/2 = -1.5708 (top center, the 0% mark)
  const RIGHT = 0;              // 0 (right edge)

  // Normalize value to -100 to +100 range
  const clampedValue = Math.max(-100, Math.min(100, value));
  const absValue = Math.abs(clampedValue);

  // Calculate fill angle: 100% = œÄ/2 radians (90¬∞, half the semicircle)
  const fillAngle = (absValue / 100) * (Math.PI / 2);

  // === STEP 1: Draw gray background arc ===
  // Semicircle from LEFT to RIGHT, going CLOCKWISE (through TOP)
  ctx.beginPath();
  ctx.arc(centerX, centerY, radius, LEFT, RIGHT, false);  // false = clockwise through top
  ctx.strokeStyle = '#E0E0E0';
  ctx.lineWidth = lineWidth;
  ctx.lineCap = 'round';
  ctx.stroke();

  // === STEP 2: Determine fill color ===
  let fillColor = null;
  if (clampedValue < 0) {
    // Warm colors for negative
    if (clampedValue <= -50) fillColor = '#C53929';      // Dark red
    else if (clampedValue <= -20) fillColor = '#EA4335'; // Google Red
    else fillColor = '#F9AB00';                          // Orange
  } else if (clampedValue > 0) {
    // Cool colors for positive
    if (clampedValue >= 50) fillColor = '#1E8E3E';       // Dark green
    else if (clampedValue >= 20) fillColor = '#34A853';  // Google Green
    else fillColor = '#4285F4';                          // Google Blue
  }

  // === STEP 3: Draw colored fill arc ===
  if (clampedValue !== 0 && fillColor) {
    ctx.beginPath();

    if (clampedValue < 0) {
      // NEGATIVE: Fill from TOP toward LEFT
      // From TOP(-œÄ/2) toward LEFT(œÄ), we go COUNTER-CLOCKWISE
      // In angle terms: -œÄ/2 ‚Üí -œÄ (which wraps to œÄ)
      // So we SUBTRACT from TOP to move toward LEFT
      const startAngle = TOP;
      const endAngle = TOP - fillAngle;  // Goes toward -œÄ (same as œÄ, the left side)
      ctx.arc(centerX, centerY, radius, startAngle, endAngle, true);  // true = CCW toward left
    } else {
      // POSITIVE: Fill from TOP toward RIGHT
      // From TOP(-œÄ/2) toward RIGHT(0), we go CLOCKWISE
      // In angle terms: -œÄ/2 ‚Üí 0
      // So we ADD to TOP to move toward RIGHT
      const startAngle = TOP;
      const endAngle = TOP + fillAngle;  // Goes toward 0 (the right side)
      ctx.arc(centerX, centerY, radius, startAngle, endAngle, false);  // false = CW toward right
    }

    ctx.strokeStyle = fillColor;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = 'butt';  // Use butt cap so fill starts exactly at 0% line
    ctx.stroke();
  }

  // === STEP 4: Draw center tick mark at 0% (top) ===
  const tickY1 = centerY - radius + lineWidth/2 + 2;
  const tickY2 = centerY - radius - lineWidth/2 - 4;
  ctx.beginPath();
  ctx.moveTo(centerX, tickY1);
  ctx.lineTo(centerX, tickY2);
  ctx.strokeStyle = '#9E9E9E';
  ctx.lineWidth = 2;
  ctx.lineCap = 'round';
  ctx.stroke();

  // Update value display with appropriate color class
  const displayValue = value >= 0 ? '+' + value.toFixed(1) + '%' : value.toFixed(1) + '%';
  valueEl.textContent = displayValue;

  // Set color class based on value
  let colorClass = 'gauge-value';
  if (value >= 0) {
    colorClass += ' positive';
    if (value < 20) colorClass += ' small';
  } else {
    colorClass += ' negative';
    if (value > -20) colorClass += ' small';
  }
  valueEl.className = colorClass;
}

function initCustomGauges() {
  const gaugeContainers = document.querySelectorAll('.custom-gauge-container');
  gaugeContainers.forEach(container => {
    drawGauge(container);
  });
}

// Draw Horizontal Bar Chart for Top 5 Inflation Categories
function drawInflationBarChart() {
  const container = document.getElementById('inflation-bar-chart');
  if (!container) return;

  // Top 5 categories by absolute inflation value (Nov 2025 data)
  const data = [
    { name: 'Personal Care & Effects', value: 24.04 },
    { name: 'Vegetables', value: -22.2 },
    { name: 'Pulses & Products', value: -15.86 },
    { name: 'Oils & Fats', value: 7.87 },
    { name: 'Fruits', value: 6.87 }
  ];

  // Sort by absolute value descending
  data.sort((a, b) => Math.abs(b.value) - Math.abs(a.value));

  const maxAbs = Math.max(...data.map(d => Math.abs(d.value)));
  const barHeight = 40;
  const gap = 12;
  const labelWidth = 180;
  const valueWidth = 70;

  let html = '<div style="display: flex; flex-direction: column; gap: ' + gap + 'px; font-family: sans-serif;">';

  data.forEach((item, index) => {
    const isPositive = item.value >= 0;
    const barWidth = (Math.abs(item.value) / maxAbs) * 100;
    const color = isPositive ? '#34A853' : '#EA4335';
    const sign = isPositive ? '+' : '';

    html += `
      <div style="display: flex; align-items: center; height: ${barHeight}px;">
        <div style="width: ${labelWidth}px; font-size: 0.9rem; color: #3C4043; text-align: right; padding-right: 12px; white-space: nowrap;">
          ${item.name}
        </div>
        <div style="flex: 1; background: #f0f0f0; border-radius: 4px; height: 24px; position: relative; overflow: hidden;">
          <div style="
            position: absolute;
            ${isPositive ? 'left: 50%' : 'right: 50%'};
            width: ${barWidth / 2}%;
            height: 100%;
            background: ${color};
            border-radius: ${isPositive ? '0 4px 4px 0' : '4px 0 0 4px'};
          "></div>
          <div style="position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: #9AA0A6;"></div>
        </div>
        <div style="width: ${valueWidth}px; font-size: 0.9rem; font-weight: 600; color: ${color}; text-align: left; padding-left: 12px;">
          ${sign}${item.value.toFixed(1)}%
        </div>
      </div>
    `;
  });

  // Add axis labels
  html += `
    <div style="display: flex; align-items: center;">
      <div style="width: ${labelWidth}px;"></div>
      <div style="flex: 1; display: flex; justify-content: space-between; font-size: 0.75rem; color: #9AA0A6; padding: 4px 0;">
        <span>-25%</span>
        <span>0%</span>
        <span>+25%</span>
      </div>
      <div style="width: ${valueWidth}px;"></div>
    </div>
  `;

  html += '</div>';
  html += '<div style="text-align: center; margin-top: 12px; font-size: 0.75rem; color: #9AA0A6;">Source: <a href="https://mospi.gov.in" target="_blank" style="color: #174ea6;">MOSPI</a> (Nov 2025)</div>';

  container.innerHTML = html;
}

// Tab Navigation Functionality
function initTabs() {
  const tabButtons = document.querySelectorAll('.tab-button');
  const tabContents = document.querySelectorAll('.tab-content');

  tabButtons.forEach(button => {
    button.addEventListener('click', () => {
      const targetTab = button.getAttribute('data-tab');

      // Remove active class from all buttons and contents
      tabButtons.forEach(btn => btn.classList.remove('active'));
      tabContents.forEach(content => content.classList.remove('active'));

      // Add active class to clicked button and corresponding content
      button.classList.add('active');
      const targetContent = document.getElementById(`tab-${targetTab}`);
      if (targetContent) {
        targetContent.classList.add('active');
      }
    });
  });
}

document.addEventListener('DOMContentLoaded', function() {
  initTabs();
  initCustomGauges();
  drawInflationBarChart();
});
</script>
{% endblock %}
